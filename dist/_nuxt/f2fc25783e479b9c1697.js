(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{441:function(t,e,o){"use strict";o.r(e);o(52);var r=o(3),n=(o(15),o(12),o(2),o(21)),l=o.n(n),d=o(68),c=o(69),m={middleware:["session-control","admin"],layout:"admin",components:{ValidationObserver:c.a,ValidationProvider:c.b},mounted:function(){this.retrieveData()},data:function(){return{counter:null!==this.data&&void 0!==this.data&&""!==this.data&&null!==this.data.values&&void 0!==this.data.values&&""!==this.data.values?this.data.values.length:0,e1:1,imageData:[],data:{images:[]},searchTitle:null,headers:[{text:"#",align:"center",value:"rank"},{text:"Görsel",align:"center",value:"img_url",sortable:!1},{text:"Kapak Fotoğrafı",align:"center",value:"isCover"},{text:"Durum",align:"center",value:"isActive"},{text:"İşlemler",align:"center",value:"actions",sortable:!1}],page:1,totalPages:0,pageSize:25,pageSizes:[25,50,100,200,500,1e3],loading:!1,options:{url:"https://api.klinikdiyetisyen.com/api/panel/diseases/create-file/"+this.$route.params.id,headers:{Authorization:"Bearer "+(null!==l.a.get("userData")&&void 0!==l.a.get("userData")&&""!==l.a.get("userData")?JSON.parse(d.a.decode(l.a.get("userData"))).api_token:null)},params:{title:null!==this.data&&void 0!==this.data&&""!==this.data?this.data.data.name:null},uploadMultiple:!0,parallelUploads:10},userData:null!==l.a.get("userData")&&void 0!==l.a.get("userData")&&""!==l.a.get("userData")?JSON.parse(d.a.decode(l.a.get("userData"))):null,tab:null,items:[{tab:"Hastalık Değerleri"}]}},computed:{img_url:function(){return"https://api.klinikdiyetisyen.com/"}},validate:function(t){var e=t.params;return null!==e.id?e.id:null},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,n,l,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.params,r=t.error,n=t.$axios,e.prev=1,e.next=4,n.get("https://api.klinikdiyetisyen.com/api/panel/diseases/update/"+o.id);case 4:return l=e.sent,0!==(data=l.data).data.values.length&&null!==data.data.values.length&&void 0!==data.data.values.length||data.data.values.push({title:"",min:"",max:"",type:"",id:0}),e.abrupt("return",data);case 10:e.prev=10,e.t0=e.catch(1),r({message:"Hastalık Bilgisi Bulunamadı.",statusCode:404});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},methods:{selectCover:function(){this.e1=3,this.retrieveData()},getRequestParams:function(t,e,o){var r={};return r.title=t,r.page=e,r.size=o,r},retrieveData:function(t){var e=this,o="get-all";void 0!==t&&""!==t&&null!==t&&(o=t);var r=this.getRequestParams(this.searchTitle,this.page,this.pageSize);this.$axios.get("".concat("https://api.klinikdiyetisyen.com/api/","panel/datatables/").concat(o,"?table=diseases_file&page=").concat(r.page,"&per_page=").concat(r.size,"&search=").concat(r.title,"&search_columns=name,email,phone&where_column=diseases_id&where_value=").concat(this.data._id.$oid,"&joins=diseases_file"),{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){e.imageData=t.data.data.data.map(e.getDisplayData),e.totalPages=t.data.data.last_page})).catch((function(t){return console.log(t)})).finally((function(){return e.loading=!1}))},handlePageChange:function(t){this.page=t,this.retrieveData()},handlePageSizeChange:function(t){this.pageSize=t,this.page=1,this.retrieveData()},refreshList:function(){this.retrieveData()},deleteData:function(t){var e=this;this.$axios.delete("https://api.klinikdiyetisyen.com/api/panel/diseases/delete/"+t,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){t.data.success?(e.$izitoast.success({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"}),e.refreshList()):e.$izitoast.error({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"})}))},isActiveSetter:function(t){var e=this;this.$axios.get("https://api.klinikdiyetisyen.com/api/panel/datatables/is-active-setter?table=diseases_file&id="+t,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){t.data.success?(e.$izitoast.success({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"}),e.refreshList()):e.$izitoast.error({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"})}))},isCoverSetter:function(t){var e=this;this.$axios.get("https://api.klinikdiyetisyen.com/api/panel/datatables/is-cover-setter?table=diseases_file&foreign_column=diseases_id&id="+t,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){t.data.success?(e.$izitoast.success({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"}),e.refreshList()):e.$izitoast.error({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"})}))},getDisplayData:function(data){return{rank:data.rank,id:data._id.$oid,img_url:this.img_url+"public/storage/"+data.img_url,isCover:data.isCover,isActive:data.isActive}},cloneProperty:function(){this.data.values.push({title:"",value:"",type:"",id:++this.counter})},removeProperty:function(t){this.data.values.splice(t,1)},cloneProperty2:function(){this.data.criteria_values.push({value:"",type:"",id:++this.counter2})},removeProperty2:function(t){this.data.criteria_values.splice(t,1)},onComplete:function(t){JSON.parse(t.xhr.response).success?this.$izitoast.success({title:JSON.parse(t.xhr.response).title,message:JSON.parse(t.xhr.response).msg,position:"topCenter",displayMode:"once"}):this.$izitoast.error({title:JSON.parse(t.xhr.response).title,message:JSON.parse(t.xhr.response).msg,position:"topCenter",displayMode:"once"})},editDiseases:function(){var t=this,e=new FormData(this.$refs.diseasesForm);this.$axios.post("https://api.klinikdiyetisyen.com/api/panel/diseases/update/"+this.data._id.$oid,e,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-Type":"multipart/form-data; boundary="+e._boundary,Authorization:"Bearer "+this.userData.api_token}}).then((function(e){e.data.success?(t.$izitoast.success({title:e.data.title,message:e.data.msg,position:"topCenter"}),setTimeout((function(){t.$router.go(decodeURIComponent("/panel/diseases"))}),2e3)):t.$izitoast.error({title:e.data.title,message:e.data.msg,position:"topCenter"})}))}}},v=o(67),h=o(264),f=o.n(h),C=o(326),_=o(258),y=o(256),A=o(266),k=o(272),x=o(273),w=o(240),T=o(274),D=o(335),P=o(337),S=o(336),O=o(324),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("div",{staticClass:"main-wrapper"},[o("div",{staticClass:"page-wrapper"},[o("div",{staticClass:"content container-fluid"},[o("div",{staticClass:"page-header"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("h3",{staticClass:"page-title"},[t._v("Hastalık Düzenle")]),t._v(" "),o("ul",{staticClass:"breadcrumb"},[o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/panel",tag:"a"}},[t._v("Anasayfa")])],1),t._v(" "),o("li",{staticClass:"breadcrumb-item active"},[t._v("Hastalık Düzenle")])])])])]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[o("h4",{staticClass:"card-title"},[t._v("Hastalık Düzenle")])]),t._v(" "),o("div",{staticClass:"card-body"},[o("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[o("form",{ref:"diseasesForm",attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),r(t.editDiseases)}}},[o("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[o("v-stepper-header",[o("v-stepper-step",{attrs:{complete:t.e1>1,step:"1"}},[t._v("\n                          Hastalık Bilgileri\n                        ")]),t._v(" "),o("v-divider")],1),t._v(" "),o("v-stepper-items",[o("v-stepper-content",{attrs:{step:"1"}},[o("ValidationProvider",{attrs:{name:"Hastalık Adı",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"title"}},[t._v("Hastalık Adı")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{id:"title",type:"text",name:"name"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}}),t._v(" "),o("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(r[0]))])])]}}],null,!0)}),t._v(" "),o("ValidationProvider",{attrs:{name:"Hastalık Açıklaması",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"description"}},[t._v("Hastalık Açıklaması")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.description,expression:"data.description"}],staticClass:"form-control",attrs:{id:"description",name:"description"},domProps:{value:t.data.description},on:{input:function(e){e.target.composing||t.$set(t.data,"description",e.target.value)}}}),t._v(" "),o("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(r[0]))])])]}}],null,!0)}),t._v(" "),o("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(e){return o("v-tab",{key:e.tab},[t._v("\n                              "+t._s(e.tab)+"\n                            ")])})),1),t._v(" "),o("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("v-tab-item",{attrs:{eager:""}},[o("v-card",{attrs:{flat:""}},[null!==t.data.values&&void 0!==t.data.values&&""!==t.data.values&&t.data.values.length>0?o("v-card-text",t._l(t.data.values,(function(input,e){return o("div",{key:e,staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4"},[o("ValidationProvider",{attrs:{name:"Hastalık Değeri Adı",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.errors;return[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"disease"+e}},[t._v("Hastalık Değeri Adı")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:input.title,expression:"input.title"}],staticClass:"form-control",attrs:{id:"disease"+e,type:"text",name:"diseaseName[]"},domProps:{value:input.title},on:{input:function(e){e.target.composing||t.$set(input,"title",e.target.value)}}}),t._v(" "),o("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),o("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"},[o("ValidationProvider",{attrs:{name:"Minimum Hastalık Değeri",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.errors;return[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"diseaseMin"+e}},[t._v("Minimum Hastalık Değeri")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:input.min,expression:"input.min"}],staticClass:"form-control",attrs:{id:"diseaseMin"+e,type:"text",name:"diseaseMin[]"},domProps:{value:input.min},on:{input:function(e){e.target.composing||t.$set(input,"min",e.target.value)}}}),t._v(" "),o("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),o("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"},[o("ValidationProvider",{attrs:{name:"Maximum Hastalık Değeri",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.errors;return[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"diseaseMax"+e}},[t._v("Maximum Hastalık Değeri")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:input.max,expression:"input.max"}],staticClass:"form-control",attrs:{id:"diseaseMax"+e,type:"text",name:"diseaseMax[]"},domProps:{value:input.max},on:{input:function(e){e.target.composing||t.$set(input,"max",e.target.value)}}}),t._v(" "),o("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),o("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"},[o("ValidationProvider",{attrs:{name:"Hastalık Değeri Türü",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.errors;return[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"diseaseType"+e}},[t._v("Hastalık Değeri Türü")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:input.type,expression:"input.type"}],staticClass:"form-control",attrs:{id:"diseaseType"+e,type:"text",name:"diseaseType[]"},domProps:{value:input.type},on:{input:function(e){e.target.composing||t.$set(input,"type",e.target.value)}}}),t._v(" "),o("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),o("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2 py-auto my-auto text-center align-bottom"},[o("button",{staticClass:"btn btn-lg btn-primary text-white rounded-circle align-bottom text-center",attrs:{role:"button"},on:{click:function(e){return e.preventDefault(),t.cloneProperty(e)}}},[o("i",{staticClass:"fa fa-plus"})]),t._v(" "),t.data.values.length>1?o("button",{staticClass:"btn btn-lg btn-danger text-white rounded-circle align-bottom text-center",attrs:{role:"button"},on:{click:function(o){return o.preventDefault(),t.removeProperty(e)}}},[o("i",{staticClass:"fa fa-times"})]):t._e()])])})),0):t._e()],1)],1)],1),t._v(" "),o("button",{staticClass:"btn btn-outline-primary rounded-0 btn-lg",attrs:{type:"submit"}},[t._v("\n                            Hastalığı Güncelle\n                          ")])],1)],1)],1)],1)]}}])})],1)])])])])])])])}),[],!1,null,null,null);e.default=component.exports;f()(component,{VApp:C.a,VCard:_.a,VCardText:y.c,VDivider:A.a,VStepper:k.a,VStepperContent:x.a,VStepperHeader:w.a,VStepperItems:w.b,VStepperStep:T.a,VTab:D.a,VTabItem:P.a,VTabs:S.a,VTabsItems:O.a})}}]);