(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{450:function(t,e,r){"use strict";r.r(e);r(27),r(13);var o=r(4),n=(r(54),r(7)),l=(r(20),r(5),r(2),r(72)),d={middleware:["admin"],layout:"admin",components:{ValidationObserver:l.a,ValidationProvider:l.b},mounted:function(){this.retrieveData()},data:function(){return{counter:null!==this.data&&void 0!==this.data&&""!==this.data&&null!==this.data.values&&void 0!==this.data.values&&""!==this.data.values?this.data.values.length:0,e1:1,imageData:[],data:{images:[]},searchTitle:null,headers:[{text:"#",align:"center",value:"rank"},{text:"Görsel",align:"center",value:"img_url",sortable:!1},{text:"Kapak Fotoğrafı",align:"center",value:"isCover"},{text:"Durum",align:"center",value:"isActive"},{text:"İşlemler",align:"center",value:"actions",sortable:!1}],page:1,totalPages:0,pageSize:25,pageSizes:[25,50,100,200,500,1e3],loading:!1,options:{url:"https://api.klinikdiyetisyen.com/api/panel/diseases/create-file/"+this.$route.params.id,headers:{Authorization:"Bearer "+(this.isEmpty(this.$auth.$storage.getUniversal("user"))?null:this.$auth.$storage.getUniversal("user").api_token)},params:{title:null!==this.data&&void 0!==this.data&&""!==this.data?this.data.data.name:null},uploadMultiple:!0,parallelUploads:10},userData:this.isEmpty(this.$auth.$storage.getUniversal("user"))?null:this.$auth.$storage.getUniversal("user"),tab:null,items:[{tab:"Hastalık Değerleri"}]}},computed:{img_url:function(){return"https://api.klinikdiyetisyen.com/"}},validate:function(t){var e=t.params;return null!==e.id?e.id:null},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,o,n,l,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,o=t.error,n=t.$axios,e.prev=1,e.next=4,n.get("https://api.klinikdiyetisyen.com/api/panel/diseases/update/"+r.id);case 4:return l=e.sent,0!==(data=l.data).data.values.length&&null!==data.data.values.length&&void 0!==data.data.values.length||data.data.values.push({title:"",min:"",max:"",type:"",id:0}),e.abrupt("return",data);case 10:e.prev=10,e.t0=e.catch(1),o({message:"Hastalık Bilgisi Bulunamadı.",statusCode:404});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},methods:{isEmpty:function(t){return"number"!=typeof t&&("string"==typeof t||Array.isArray(t)?0==t.length:"object"==Object(o.a)(t)?null==t||0==Object.keys(t).length:"boolean"!=typeof t&&!t)},selectCover:function(){this.e1=3,this.retrieveData()},getRequestParams:function(t,e,r){var o={};return o.title=t,o.page=e,o.size=r,o},retrieveData:function(t){var e=this,r="get-all";void 0!==t&&""!==t&&null!==t&&(r=t);var o=this.getRequestParams(this.searchTitle,this.page,this.pageSize);this.$axios.get("".concat("https://api.klinikdiyetisyen.com/api/","panel/datatables/").concat(r,"?table=diseases_file&page=").concat(o.page,"&per_page=").concat(o.size,"&search=").concat(o.title,"&search_columns=name,email,phone&where_column=diseases_id&where_value=").concat(this.data._id.$oid,"&joins=diseases_file"),{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){e.imageData=t.data.data.data.map(e.getDisplayData),e.totalPages=t.data.data.last_page})).catch((function(t){return console.log(t)})).finally((function(){return e.loading=!1}))},handlePageChange:function(t){this.page=t,this.retrieveData()},handlePageSizeChange:function(t){this.pageSize=t,this.page=1,this.retrieveData()},refreshList:function(){this.retrieveData()},deleteData:function(t){var e=this;this.$axios.delete("https://api.klinikdiyetisyen.com/api/panel/diseases/delete/"+t,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){t.data.success?(e.$izitoast.success({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"}),e.refreshList()):e.$izitoast.error({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"})}))},isActiveSetter:function(t){var e=this;this.$axios.get("https://api.klinikdiyetisyen.com/api/panel/datatables/is-active-setter?table=diseases_file&id="+t,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){t.data.success?(e.$izitoast.success({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"}),e.refreshList()):e.$izitoast.error({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"})}))},isCoverSetter:function(t){var e=this;this.$axios.get("https://api.klinikdiyetisyen.com/api/panel/datatables/is-cover-setter?table=diseases_file&foreign_column=diseases_id&id="+t,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-type":"application/json",Authorization:"Bearer "+this.userData.api_token},credentials:"same-origin"}).then((function(t){t.data.success?(e.$izitoast.success({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"}),e.refreshList()):e.$izitoast.error({title:t.data.title,message:t.data.msg,position:"topCenter",displayMode:"once"})}))},getDisplayData:function(data){return{rank:data.rank,id:data._id.$oid,img_url:this.img_url+"public/storage/"+data.img_url,isCover:data.isCover,isActive:data.isActive}},cloneProperty:function(){this.data.values.push({title:"",value:"",type:"",id:++this.counter})},removeProperty:function(t){this.data.values.splice(t,1)},cloneProperty2:function(){this.data.criteria_values.push({value:"",type:"",id:++this.counter2})},removeProperty2:function(t){this.data.criteria_values.splice(t,1)},onComplete:function(t){JSON.parse(t.xhr.response).success?this.$izitoast.success({title:JSON.parse(t.xhr.response).title,message:JSON.parse(t.xhr.response).msg,position:"topCenter",displayMode:"once"}):this.$izitoast.error({title:JSON.parse(t.xhr.response).title,message:JSON.parse(t.xhr.response).msg,position:"topCenter",displayMode:"once"})},editDiseases:function(){var t=this,e=new FormData(this.$refs.diseasesForm);this.$axios.post("https://api.klinikdiyetisyen.com/api/panel/diseases/update/"+this.data._id.$oid,e,{json:!0,withCredentials:!1,mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token, Authorization","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":!0,"Content-Type":"multipart/form-data; boundary="+e._boundary,Authorization:"Bearer "+this.userData.api_token}}).then((function(e){e.data.success?(t.$izitoast.success({title:e.data.title,message:e.data.msg,position:"topCenter"}),setTimeout((function(){t.$router.go(decodeURIComponent("/panel/diseases"))}),2e3)):t.$izitoast.error({title:e.data.title,message:e.data.msg,position:"topCenter"})}))}}},c=r(71),m=r(273),v=r.n(m),h=r(335),f=r(267),C=r(265),_=r(275),y=r(281),A=r(282),k=r(249),x=r(283),w=r(345),T=r(347),D=r(346),P=r(333),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("div",{staticClass:"main-wrapper"},[r("div",{staticClass:"page-wrapper"},[r("div",{staticClass:"content container-fluid"},[r("div",{staticClass:"page-header"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("h3",{staticClass:"page-title"},[t._v("Hastalık Düzenle")]),t._v(" "),r("ul",{staticClass:"breadcrumb"},[r("li",{staticClass:"breadcrumb-item"},[r("nuxt-link",{attrs:{to:"/panel"}},[t._v("Anasayfa")])],1),t._v(" "),r("li",{staticClass:"breadcrumb-item active"},[t._v("Hastalık Düzenle")])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("h4",{staticClass:"card-title"},[t._v("Hastalık Düzenle")])]),t._v(" "),r("div",{staticClass:"card-body"},[r("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[r("form",{ref:"diseasesForm",attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),o(t.editDiseases)}}},[r("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[r("v-stepper-header",[r("v-stepper-step",{attrs:{complete:t.e1>1,step:"1"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\tHastalık Bilgileri\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),r("v-divider")],1),t._v(" "),r("v-stepper-items",[r("v-stepper-content",{attrs:{step:"1"}},[r("ValidationProvider",{attrs:{name:"Hastalık Adı",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[t._v("Hastalık Adı")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{id:"title",type:"text",name:"name"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}}),t._v(" "),r("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(o[0]))])])]}}],null,!0)}),t._v(" "),r("ValidationProvider",{attrs:{name:"Hastalık Açıklaması",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"description"}},[t._v("Hastalık Açıklaması")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.description,expression:"data.description"}],staticClass:"form-control",attrs:{id:"description",name:"description"},domProps:{value:t.data.description},on:{input:function(e){e.target.composing||t.$set(t.data,"description",e.target.value)}}}),t._v(" "),r("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(o[0]))])])]}}],null,!0)}),t._v(" "),r("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("client-only",t._l(t.items,(function(e){return r("v-tab",{key:e.tab},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.tab)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1),t._v(" "),r("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab-item",{attrs:{eager:""}},[r("v-card",{attrs:{flat:""}},[null!==t.data.values&&void 0!==t.data.values&&""!==t.data.values&&t.data.values.length>0?r("v-card-text",[r("client-only",t._l(t.data.values,(function(input,e){return r("div",{key:e,staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4"},[r("ValidationProvider",{attrs:{name:"Hastalık Değeri Adı",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"disease"+e}},[t._v("Hastalık Değeri Adı")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:input.title,expression:"input.title"}],staticClass:"form-control",attrs:{id:"disease"+e,type:"text",name:"diseaseName[]"},domProps:{value:input.title},on:{input:function(e){e.target.composing||t.$set(input,"title",e.target.value)}}}),t._v(" "),r("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"},[r("ValidationProvider",{attrs:{name:"Minimum Hastalık Değeri",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"diseaseMin"+e}},[t._v("Minimum Hastalık Değeri")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:input.min,expression:"input.min"}],staticClass:"form-control",attrs:{id:"diseaseMin"+e,type:"text",name:"diseaseMin[]"},domProps:{value:input.min},on:{input:function(e){e.target.composing||t.$set(input,"min",e.target.value)}}}),t._v(" "),r("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"},[r("ValidationProvider",{attrs:{name:"Maximum Hastalık Değeri",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"diseaseMax"+e}},[t._v("Maximum Hastalık Değeri")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:input.max,expression:"input.max"}],staticClass:"form-control",attrs:{id:"diseaseMax"+e,type:"text",name:"diseaseMax[]"},domProps:{value:input.max},on:{input:function(e){e.target.composing||t.$set(input,"max",e.target.value)}}}),t._v(" "),r("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"},[r("ValidationProvider",{attrs:{name:"Hastalık Değeri Türü",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"diseaseType"+e}},[t._v("Hastalık Değeri Türü")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:input.type,expression:"input.type"}],staticClass:"form-control",attrs:{id:"diseaseType"+e,type:"text",name:"diseaseType[]"},domProps:{value:input.type},on:{input:function(e){e.target.composing||t.$set(input,"type",e.target.value)}}}),t._v(" "),r("small",{staticClass:"font-weight-bold text-danger"},[t._v(t._s(n[0]))])])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-2 col-xl-2 py-auto my-auto text-center align-bottom"},[r("button",{staticClass:"btn btn-lg btn-primary text-white rounded-circle align-bottom text-center",attrs:{role:"button"},on:{click:function(e){return e.preventDefault(),t.cloneProperty(e)}}},[r("i",{staticClass:"fa fa-plus"})]),t._v(" "),t.data.values.length>1?r("button",{staticClass:"btn btn-lg btn-danger text-white rounded-circle align-bottom text-center",attrs:{role:"button"},on:{click:function(r){return r.preventDefault(),t.removeProperty(e)}}},[r("i",{staticClass:"fa fa-times"})]):t._e()])])})),0)],1):t._e()],1)],1)],1),t._v(" "),r("button",{staticClass:"btn btn-outline-primary rounded-0 btn-lg",attrs:{type:"submit"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tHastalığı Güncelle\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1)],1)]}}])})],1)])])])])])])])}),[],!1,null,null,null);e.default=component.exports;v()(component,{VApp:h.a,VCard:f.a,VCardText:C.c,VDivider:_.a,VStepper:y.a,VStepperContent:A.a,VStepperHeader:k.a,VStepperItems:k.b,VStepperStep:x.a,VTab:w.a,VTabItem:T.a,VTabs:D.a,VTabsItems:P.a})}}]);